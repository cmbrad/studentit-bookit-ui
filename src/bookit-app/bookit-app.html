<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="../../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">


<link rel="import" href="../library-card/library-card.html">

<link rel="import" href="../bookit-data/bookit-data.html">

<dom-module id="bookit-app">
  <template>
    <style>
      #header-text {
        font-size: 20px;
        font-weight: 400;
        cursor: default;
      }

      #page-content {
        box-sizing: border-box;

        width: 100vw;
        height: 100%;
        overflow-x: hidden;
        overflow-y: auto;

        padding: 0 72px 0 72px;
      }

      #cards-container {
        width: 100%;
        padding-top: 32px;

        white-space: nowrap;
        overflow-x: hidden;
        padding: 32px 3px 3px 3px;
      }
    </style>

    <bookit-data loading="[[loading]]"></bookit-data>

    <paper-drawer-panel force-narrow>
      <paper-header-panel drawer></paper-header-panel>
      <paper-header-panel main>
        <paper-toolbar>
          <paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
          <div id="header-text" class="flex">FindIT</div>
        </paper-toolbar>

        <div id="page-content">
          <div id="cards-container">
            <h3>Libraries</h3>
            <template is="dom-repeat" items="[[stateData]]">
              <library-card heading="[[item.name]]"
                image="../../img/library/[[nameToImage(item.name)]]">
              </library-card>
            </template>
            <!--<library-card heading="Architecture" image="../../img/library/architecture.jpg"></library-card>
            <library-card heading="Baillieu" image="../../img/library/baillieu.jpg"></library-card>
            <library-card heading="Brownless" image="../../img/library/brownless.jpg"></library-card>
            <library-card heading="Burnley" image="../../img/library/burnley.jpg"></library-card>
            <library-card heading="ERC" image="../../img/library/eastern_resource_center.jpg"></library-card>
            <library-card heading="Frank Tate" image="../../img/library/eastern_resource_center.jpg"></library-card>
            <library-card heading="Giblin Eunson" image="../../img/library/giblin_eunson.jpg"></library-card>
            <library-card heading="Law" image="../../img/library/law.jpg"></library-card>
            <library-card heading="Lenton Parr" image="../../img/library/lenton_parr.jpg"></library-card>
            <library-card heading="Werribee" image="../../img/library/werribee.jpg"></library-card>-->
          </div>
          <div id="cards-container">
            <h3>Actions</h3>
            <library-card heading="Nearby Computers" image="../../img/actions/computers.jpg"></library-card>
            <library-card heading="Nearby Rooms" image="../../img/actions/project_room.jpg"></library-card>
            <library-card heading="BookIT" image="../../img/actions/bookit.jpg"></library-card>
          </div>
        </div>
      </paper-header-panel>
    </paper-drawer-panel>
  </template>

  <script>
    Polymer({

      is: 'bookit-app',

      ready: function() {
        document.querySelector('bookit-data').addEventListener('state-data-updated', function(e) {
          //console.log(e.detail.data);
          //this.stateData = e.detail.data;
          this.set('stateData', e.detail.data);
        }.bind(this));
      },

      properties: {
        stateData: {
          type: Array,
          notify: true
        },
      },

      nameToImage: function(name) {
        var nameDict = {
          'Architecture': 'architecture.jpg',
          'Baillieu': 'baillieu.jpg',
          'Brownless': 'brownless.jpg',
          'Burnley': 'burnley.jpg',
          'ERC': 'eastern_resource_center.jpg',
          'Giblin Eunson': 'giblin_eunson.jpg',
          'Law': 'law.jpg',
          'Lenton Parr': 'lenton_parr.jpg',
          'Werribee': 'werribee.jpg',
        }

        console.log(name in nameDict ? nameDict[name] : 'default.jpg');

        return name in nameDict ? nameDict[name] : 'default.jpg';
      }
    });


  </script>
</dom-module>
