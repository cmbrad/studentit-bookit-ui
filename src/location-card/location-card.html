<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-icons/hardware-icons.html">

<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">

<dom-module id="location-card">
	<template>
		<style>
			:host {
				display: inline-block;
				box-sizing: border-box;

                margin: 0 3px 0 3px;

				--paper-card-header-color: white;
				--paper-card-header-image: {
					filter: brightness(60%);
                    width: 220px;
                    height: 160px;
				}
				--paper-card-header-text: {
					cursor: default;
				}
			}
			
			.card-content {
				display: flex;
				align-items: center;
				justify-content: center;
			}
			
			.free-pip {
				background: #f00;
				width: 50px;
				height: 30px;
				border-radius: 25%;
				color: white;
				display: flex;
				align-items: center;
				justify-content: center;
			}
			
			.computer-pip {
				background-color: #ff4081;
			}
			
			.room-pip {
				background-color: #ff4081;
			}

            paper-card {
                width: 100%;
            }
		</style>

        <paper-card heading="[[heading]]" image="[[image]]" elevation="1" animated-shadow="true">
            <div class="card-content">
                <paper-icon-button icon="hardware:desktop-windows"></paper-icon-button>
                <div class="free-pip computer-pip">[[availableComputers]]</div>
                <paper-icon-button icon="icons:home"></paper-icon-button>
                <div class="free-pip room-pip">[[availableRooms]]</div>
            </div>
        </paper-card>
	</template>
	<script>
        Polymer({
            is: 'location-card',

            properties: {
                heading: {
                    type: String
                },
                image: {
                    type: String
                },
                availableComputers: {
                    type: Number
                },
                availableRooms: {
                    type: Number
                },
                wide: {
                    type: Boolean,
                    observer: '_wideChanged'
                }
            },

            _wideChanged: function(wide) {
                if (wide) {
                    this.style.width = '100%';
                    console.log('wide');
                    this.customStyle['--paper-card-header-image'] = 'width: 100%; height: 160px; filter: brightness(60%);';
                } else {
                    console.log('narrow');
                    this.style.width = 'auto';
                    this.customStyle['--paper-card-header-image'] = 'width: 220px; height: 160px; filter: brightness(60%);';
                }

                this.updateStyles();
            }
        });
    </script>
</dom-module>